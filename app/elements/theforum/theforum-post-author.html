<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="theforum-post-author">
  <template>
    <style>
      :host {
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-align: center;
        -webkit-align-items: center;
            -ms-flex-align: center;
                align-items: center;
      }
      :host:hover { 
        background-color: #FAFAFA;
      }

      :host > img {
        width: 24px;
        height: 24px;
        border-radius: 50%;
      }

      :host > span {
        font-family: Roboto, 'Helvetica Neue', Helvetica, sans-serif;
        margin: 10px;
        font-size: .8em;
      }
      
      :host > span.name {
        -webkit-box-flex: 1;
        -webkit-flex-grow: 1;
            -ms-flex-positive: 1;
                flex-grow: 1;
      }
      
      :host > span.fresh {
        font-weight: bold;
      }

      :host > iron-icon {
        color: #9E9E9E;
        --iron-icon-height: 16px;
        --iron-icon-width: 16px;
      }

    </style>
    
    <img src="{{photo}}" alt="{{name}}">
    <span id="author-name" class="name">{{name}}</span>
    <span id="author-at" class="date">{{prettyDate(at)}}</span> 
    <iron-icon icon="star" hidden$="{{!fresh}}"></iron-icon>
    <iron-icon icon="b" hidden$="{{fresh}}"></iron-icon>
  </template>
  <script>
  Polymer({
      is: 'theforum-post-author',
      properties: {
        fresh: {
          type: Boolean,
          value: false,
          observer: '_freshChanged'
        },
        photo: String,
        name: String,
        at: Date
      },
      _freshChanged: function(newValue, oldValue) {
        this.toggleClass('fresh', newValue, this.$['author-name']);
        this.toggleClass('fresh', newValue, this.$['author-at']);
      },
      prettyDate: function(date) {
        date = new Date(date);
        return date.toDateString(); // TODO make this mo better
      }
    });
  </script>
</dom-module>